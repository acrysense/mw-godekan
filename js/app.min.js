"use strict";

document.addEventListener('DOMContentLoaded', function () {
  // cursor
  var customCursor = document.getElementById('custom-cursor');
  var mouseX = 0,
    mouseY = 0;
  document.addEventListener('mousemove', function (e) {
    mouseX = e.clientX - 9;
    mouseY = e.clientY - 9;
    if (e.target.tagName !== 'IFRAME' && !customCursor.classList.contains('visible')) {
      customCursor.classList.add('visible');
    }
  });
  var updateCursor = function updateCursor() {
    customCursor.style.transform = "translate3d(".concat(mouseX, "px, ").concat(mouseY, "px, 0)");
    requestAnimationFrame(updateCursor);
  };
  updateCursor();

  // hovers
  var allLinks = document.querySelectorAll('a:not(.image-link)');
  var imageLinks = document.querySelectorAll('.image-link, .content-video, picture');
  var iframes = document.querySelectorAll('iframe');
  if (allLinks) {
    allLinks.forEach(function (link) {
      link.addEventListener('mouseenter', function () {
        customCursor.classList.add('hover');
      });
      link.addEventListener('mouseleave', function () {
        customCursor.classList.remove('hover');
      });
    });
  }
  if (imageLinks) {
    imageLinks.forEach(function (link) {
      link.addEventListener('mouseenter', function () {
        customCursor.classList.add('white');
      });
      link.addEventListener('mouseleave', function () {
        customCursor.classList.remove('white');
      });
    });
  }
  if (iframes) {
    iframes.forEach(function (link) {
      link.addEventListener('mouseenter', function () {
        customCursor.classList.remove('visible');
      });
      link.addEventListener('mouseleave', function () {
        customCursor.classList.add('visible');
      });
    });
  }

  // mobile menu
  var mobileMenu = document.getElementById('menu');
  var mobileMenuTrigger = document.getElementById('hamburger-toggle');
  if (mobileMenu && mobileMenuTrigger) {
    mobileMenuTrigger.addEventListener('click', function (event) {
      event.preventDefault();
      if (mobileMenu.classList.contains('is--active')) {
        mobileMenuTrigger.classList.remove('is--active');
        mobileMenu.classList.remove('is--active');
        document.body.classList.remove('scroll-disabled');
      } else {
        mobileMenuTrigger.classList.add('is--active');
        mobileMenu.classList.add('is--active');
        document.body.classList.add('scroll-disabled');
      }
    });
  }

  // about tabs
  var aboutTabsItems = document.querySelectorAll('.about__item');
  if (aboutTabsItems) {
    aboutTabsItems.forEach(function (item, i) {
      item.addEventListener('click', function () {
        var parent = item.closest('.about');
        parent.querySelectorAll('.about__item').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        parent.querySelectorAll('.about__heading').forEach(function (child) {
          return child.classList.remove('is--active');
        });
        item.classList.add('is--active');
        parent.querySelectorAll('.about__heading')[i].classList.add('is--active');
      });
    });
  }

  // iframe loading
  var contentVideoIframe = document.querySelectorAll('.content-video__media');
  if (contentVideoIframe) {
    contentVideoIframe.forEach(function (item) {
      item.addEventListener('click', function (event) {
        event.preventDefault();
        var parent = item.closest('.content-video');
        if (!parent.classList.contains('is--active')) {
          parent.classList.add('is--active');
          var frame = parent.querySelector('iframe');
          var link = frame.dataset.src + '&autoplay=1';
          frame.setAttribute('src', link);
          frame.removeAttribute('data-src');
        }
      });
    });
  }

  // projects inner slider
  var projectsInnerSlider = document.querySelector('.projects-inner__slider .swiper');
  if (projectsInnerSlider) {
    var myProjectsInnerSlider = new Swiper(projectsInnerSlider, {
      slidesPerView: 1,
      loop: true,
      speed: 800,
      parallax: true,
      watchSlidesProgress: true,
      pagination: {
        el: '.swiper-pagination',
        type: 'bullets',
        clickable: true
      }
    });
  }
});